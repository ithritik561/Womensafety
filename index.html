<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Women Safety Portal UI - Demo (Enhanced)</title>
  <style>
    :root{--bg:#f7f7fb;--card:#fff;--text:#111;--muted:#555;--accent:#d93025;--accent-2:#0b69ff;--success:#0fa96a}
    [data-theme="dark"]{ --bg:#071023; --card:#071728; --text:#e6eef8; --muted:#9fb0d0 }
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0; background:var(--bg); color:var(--text); -webkit-font-smoothing:antialiased}
    header{background:linear-gradient(90deg,#fff,#fafafa);padding:14px 20px;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid rgba(0,0,0,0.06)}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:50%;background:#fff;border:2px solid #ddd;display:flex;align-items:center;justify-content:center;font-weight:800;color:var(--accent)}
    .brand h1{font-size:16px;margin:0}
    nav{display:flex;gap:10px;align-items:center}
    .btn{cursor:pointer;border:0;padding:8px 12px;border-radius:10px;background:var(--accent-2);color:white;font-weight:700}
    .ghost{background:transparent;border:1px solid rgba(0,0,0,0.08);color:var(--text)}
    .container{max-width:1100px;margin:26px auto;padding:0 18px}

    .grid{display:grid;grid-template-columns:1fr 380px;gap:20px;align-items:start}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(10,10,20,0.04);transition:transform .18s ease}
    .card:focus-within{transform:translateY(-4px)}

    .top-actions{display:flex;gap:12px;align-items:center}
    .sos{background:var(--accent);padding:14px 18px;border-radius:12px;color:white;font-weight:900;font-size:18px;box-shadow:0 12px 30px rgba(217,48,37,0.16);transition:transform .12s}
    .sos:active{transform:scale(.98)}

    .map-mock{height:420px;border-radius:12px;overflow:hidden;border:1px solid rgba(0,0,0,0.06);position:relative;background:linear-gradient(180deg,#e9f2ff,#fff)}
    .map-bg{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:14px}
    .marker{position:absolute;background:var(--accent);color:#fff;padding:7px 10px;border-radius:12px;font-weight:800;transform:translate(-50%,-100%);box-shadow:0 8px 26px rgba(0,0,0,0.12);cursor:pointer;transition:transform .18s,box-shadow .18s}
    .marker:hover{transform:translate(-50%,-100%) scale(1.06);box-shadow:0 14px 30px rgba(0,0,0,0.18)}
    .marker.pulse::after{content:'';position:absolute;left:50%;top:50%;width:14px;height:14px;border-radius:50%;transform:translate(-50%,-50%);background:rgba(217,48,37,0.14);animation:pulse 1.6s infinite}
    @keyframes pulse{0%{transform:translate(-50%,-50%) scale(.9);opacity:1}100%{transform:translate(-50%,-50%) scale(2.2);opacity:0}}

    .controls{display:flex;gap:10px;align-items:center;margin-top:12px}
    .searchBox{display:flex;gap:8px;align-items:center}
    input[type=text]{padding:10px;border-radius:10px;border:1px solid rgba(0,0,0,0.08);min-width:180px}

    .features{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:14px}
    .feature{padding:10px;border-radius:8px;border:1px dashed rgba(0,0,0,0.04);background:linear-gradient(0deg, rgba(255,255,255,0.6), rgba(255,255,255,0.6));font-size:14px}

    .right{display:flex;flex-direction:column;gap:12px}
    .tips li{margin-bottom:8px}

    .list{max-height:260px;overflow:auto;padding:8px;border-radius:8px;border:1px solid rgba(0,0,0,0.04)}
    .place{padding:8px;border-radius:8px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(0,0,0,0.03)}
    .place:last-child{border-bottom:0}
    .place .meta{font-size:13px;color:var(--muted)}
    .small{font-size:13px}

    .toast{position:fixed;right:18px;bottom:18px;background:var(--card);padding:12px 16px;border-radius:10px;box-shadow:0 8px 26px rgba(2,6,23,0.2);display:none}
    .toast.show{display:block;animation:toastIn .32s ease}
    @keyframes toastIn{from{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}

    .animated-fade{animation:fadeIn .5s ease}
    @keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

    footer{max-width:1100px;margin:20px auto;padding:8px 18px;text-align:center;color:var(--muted);font-size:13px}

    .modal-backdrop{position:fixed;inset:0;background:rgba(0,0,0,0.45);display:none;align-items:center;justify-content:center;padding:20px}
    .modal{background:var(--card);padding:16px;border-radius:12px;max-width:720px;width:100%;box-shadow:0 14px 40px rgba(2,6,23,0.5)}
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--muted)}
    textarea{min-height:100px}

    @media (max-width:980px){.grid{grid-template-columns:1fr}.map-mock{height:280px}.right{order:2}}
    @media print{header,footer{display:none} body{background:white} .container{padding:0} .card{box-shadow:none;border:none}}
  </style>
</head>
<body>
  <header role="banner">
    <div class="brand">
      <div class="logo" aria-hidden="true">MIT</div>
      <div>
        <h1>Women Safety Portal - UI Demo (Enhanced)</h1>
        <div style="font-size:12px;color:var(--muted)">Frontend project • HTML / CSS / JavaScript</div>
      </div>
    </div>
    <nav aria-label="Main navigation">
      <button id="themeToggle" class="ghost" aria-pressed="false" title="Toggle theme">Toggle Theme</button>
      <button id="openProfile" class="btn" aria-haspopup="dialog">Profile</button>
    </nav>
  </header>

  <main class="container" role="main">
    <div class="grid">
      <section aria-labelledby="dashboard" class="card" id="left">
        <h2 id="dashboard">Dashboard</h2>
        <p style="color:var(--muted);margin-top:6px">Quick actions, searchable help centers, simulated location sharing and animated UI. This is frontend-only demo—no backend calls.</p>

        <div class="top-actions" style="margin-top:12px">
          <button id="sosBtn" class="sos" aria-label="Activate SOS">SOS</button>
          <div class="controls">
            <div class="searchBox">
              <input id="searchInput" type="text" placeholder="Search help centers (e.g. Police, Hospital)" aria-label="Search help centers" />
              <button id="clearSearch" class="ghost">Clear</button>
            </div>
            <button id="shareLocation" class="btn">Share Location</button>
            <button id="openReport" class="btn">Report Incident</button>
          </div>
        </div>

        <div style="margin-top:14px">
          <div class="map-mock" id="mapMock" aria-label="Map showing nearby help centers">
            <div class="map-bg" id="mapBg">Interactive Map Mock</div>
          </div>

          <div class="features animated-fade" style="margin-top:12px">
            <div class="feature"><strong>Emergency Call</strong><div class="small" style="color:var(--muted)">Simulated call UI with confirmation.</div></div>
            <div class="feature"><strong>Share Location</strong><div class="small" style="color:var(--muted)">Uses Geolocation API or simulated location.</div></div>
            <div class="feature"><strong>Report Form</strong><div class="small" style="color:var(--muted)">Client-side validation and preview.</div></div>
            <div class="feature"><strong>Safety Tips</strong><div class="small" style="color:var(--muted)">Accessible tips and helpline numbers.</div></div>
          </div>
        </div>
      </section>

      <aside class="right">
        <div class="card" role="region" aria-labelledby="tipsTitle">
          <h3 id="tipsTitle">Safety Tips</h3>
          <ul class="tips">
            <li><strong>Share live location</strong> with trusted contacts when travelling alone.</li>
            <li><strong>Keep emergency numbers</strong> in an easy-access place.</li>
            <li><strong>Trust your instincts</strong> — avoid isolated places at night.</li>
            <li><strong>Plan routes</strong> and prefer well-lit public transport stops.</li>
          </ul>
        </div>

        <div class="card" role="region" aria-labelledby="resourcesTitle">
          <h3 id="resourcesTitle">Help Centers (Searchable)</h3>
          <div class="list" id="placesList" tabindex="0" aria-live="polite"></div>
        </div>

        <div class="card" role="region" aria-labelledby="contactsTitle">
          <h3 id="contactsTitle">Emergency Contacts</h3>
          <div id="contactsList" style="font-size:14px;color:var(--muted)">No contacts saved. Add from Profile.</div>
        </div>
      </aside>
    </div>

    <div style="margin-top:18px;color:var(--muted);font-size:13px">Tip: Use the <strong>SOS</strong> button for the confirmation modal. Search help centers on the right and click to focus their marker on map.</div>
  </main>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <footer>Women Safety Portal UI • Frontend demo • No backend included</footer>

  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Modal</h3>
      <div id="modalContent" style="margin-top:12px"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:14px">
        <button id="modalClose" class="btn">Close</button>
      </div>
    </div>
  </div>

  <div class="modal-backdrop" id="profileBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="profileTitle">
      <h3 id="profileTitle">Profile & Emergency Contacts</h3>
      <div style="margin-top:12px">
        <label for="nameInput">Your Name</label>
        <input id="nameInput" type="text" placeholder="e.g. Priya Sharma" />

        <label for="contactInput" style="margin-top:10px">Emergency Contact (phone)</label>
        <input id="contactInput" type="text" placeholder="e.g. +91-98xxxxxxxx" />

        <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
          <button id="saveProfile" class="btn">Save</button>
          <button id="closeProfile" class="btn">Close</button>
        </div>
      </div>
    </div>
  </div>

  <template id="reportTemplate">
    <h3>Report Incident</h3>
    <form id="reportForm" novalidate>
      <label for="incidentType">Incident Type</label>
      <select id="incidentType">
        <option value="Harassment">Harassment</option>
        <option value="Assault">Assault</option>
        <option value="Threat">Threat</option>
        <option value="Other">Other</option>
      </select>
      <label for="locationInput" style="margin-top:10px">Location (text)</label>
      <input id="locationInput" type="text" placeholder="e.g. Nearest Market, Sector 5" />
      <label for="descInput" style="margin-top:10px">Description</label>
      <textarea id="descInput" placeholder="Describe what happened (client-side only)"></textarea>
      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button type="submit" class="btn">Submit</button>
      </div>
    </form>
  </template>

  <script>
    const PLACES = [
      {id:1,name:'Community Help Center',type:'Help Center',x:34,y:44,info:'Open 9am-6pm'},
      {id:2,name:'City Police Station',type:'Police Station',x:58,y:62,info:'24/7 emergency'},
      {id:3,name:'St. Mary Hospital',type:'Hospital',x:76,y:32,info:'Ambulance available'},
      {id:4,name:'Metro Safe Point',type:'Safe Point',x:22,y:72,info:'Volunteer assisted'},
      {id:5,name:'Railway Police',type:'Police Station',x:48,y:18,info:'Platform safety'},
      {id:6,name:'Women Help Centre',type:'Help Center',x:86,y:78,info:'Counseling available'}
    ];

    const mapMock = document.getElementById('mapMock');
    const placesList = document.getElementById('placesList');
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const toast = document.getElementById('toast');

    const modalBackdrop = document.getElementById('modalBackdrop');
    const modalContent = document.getElementById('modalContent');
    const modalClose = document.getElementById('modalClose');

    const profileBackdrop = document.getElementById('profileBackdrop');
    const saveProfile = document.getElementById('saveProfile');
    const closeProfile = document.getElementById('closeProfile');
    const openProfile = document.getElementById('openProfile');
    const contactsList = document.getElementById('contactsList');

    function renderPlaces(filter=''){
      mapMock.querySelectorAll('.marker').forEach(m=>m.remove());
      placesList.innerHTML = '';
      const q = filter.trim().toLowerCase();
      const filtered = PLACES.filter(p => (p.name + ' ' + p.type).toLowerCase().includes(q));
      if(filtered.length===0) placesList.innerHTML = '<div style="color:var(--muted);padding:8px">No places found.</div>';
      filtered.forEach(p => {
        const item = document.createElement('div');
        item.className = 'place';
        item.innerHTML = `<div><strong>${p.name}</strong><div class="meta">${p.type} • ${p.info}</div></div><div><button class="btn" data-id="${p.id}">Show</button></div>`;
        placesList.appendChild(item);

        const marker = document.createElement('div');
        marker.className = 'marker' + (p.type.toLowerCase().includes('police') ? ' pulse' : '');
        marker.style.left = p.x + '%';
        marker.style.top = p.y + '%';
        marker.textContent = p.type === 'Police Station' ? 'PS' : (p.type==='Hospital' ? 'H' : 'HC');
        marker.setAttribute('data-id', p.id);
        marker.setAttribute('tabindex', '0');
        marker.setAttribute('role','button');
        marker.setAttribute('aria-label', p.name + ', ' + p.type);
        mapMock.appendChild(marker);

        marker.addEventListener('click', ()=>{ focusPlace(p.id); showPlaceInfo(p); });
        marker.addEventListener('keydown', (ev)=>{ if(ev.key==='Enter' || ev.key===' ') { ev.preventDefault(); marker.click(); } });

        item.querySelector('button').addEventListener('click', ()=>{ focusPlace(p.id); showPlaceInfo(p); });
      });
    }

    function focusPlace(id){
      const m = mapMock.querySelector(`.marker[data-id="${id}"]`);
      if(!m) return;
      m.style.transition = 'transform .3s ease';
      m.style.transform = 'translate(-50%, -100%) scale(1.18)';
      setTimeout(()=>{ m.style.transform = 'translate(-50%, -100%)'; },700);
      const btn = placesList.querySelector(`button[data-id="${id}"]`);
      if(btn) btn.closest('.place').scrollIntoView({behavior:'smooth',block:'center'});
    }

    function showPlaceInfo(p){
      openModal(p.name, `<p style="color:var(--muted)">${p.type} • ${p.info}</p><div style="margin-top:8px;display:flex;gap:8px;justify-content:flex-end"><button id="navTo" class="btn">Navigate</button><button id="shareLocBtn" class="ghost">Share this place</button></div>`);
      setTimeout(()=>{
        document.getElementById('navTo').addEventListener('click', ()=>{ closeModal(); showToast('Opening navigation (simulated)'); });
        document.getElementById('shareLocBtn').addEventListener('click', ()=>{ closeModal(); shareSimulatedLocation(`${p.name} (${p.type})`); });
      },20);
    }

    renderPlaces();

    searchInput.addEventListener('input', ()=> renderPlaces(searchInput.value));
    clearSearch.addEventListener('click', ()=>{ searchInput.value=''; renderPlaces(''); searchInput.focus(); });

    function openModal(title, contentHtml){
      document.getElementById('modalTitle').textContent = title;
      modalContent.innerHTML = contentHtml;
      modalBackdrop.style.display = 'flex';
      modalBackdrop.setAttribute('aria-hidden','false');
      const focusable = modalBackdrop.querySelector('button, input, select, textarea'); if(focusable) focusable.focus();
    }
    function closeModal(){ modalBackdrop.style.display='none'; modalBackdrop.setAttribute('aria-hidden','true'); }
    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', (e)=>{ if(e.target===modalBackdrop) closeModal(); });

    function showToast(msg, time=2600){ toast.textContent = msg; toast.classList.add('show'); setTimeout(()=>{ toast.classList.remove('show'); }, time); }

    openProfile.addEventListener('click', openProfileModal);
    function openProfileModal(){ profileBackdrop.style.display='flex'; profileBackdrop.setAttribute('aria-hidden','false'); document.getElementById('nameInput').value = localStorage.getItem('ws_name')||''; document.getElementById('contactInput').value = localStorage.getItem('ws_contact')||''; document.getElementById('nameInput').focus(); }
    closeProfile.addEventListener('click', closeProfileModal);
    function closeProfileModal(){ profileBackdrop.style.display='none'; profileBackdrop.setAttribute('aria-hidden','true'); }
    saveProfile.addEventListener('click', ()=>{ const name=document.getElementById('nameInput').value.trim(); const contact=document.getElementById('contactInput').value.trim(); localStorage.setItem('ws_name',name); localStorage.setItem('ws_contact',contact); updateContactsUI(); closeProfileModal(); showToast('Profile saved locally'); });

    function updateContactsUI(){ const name = localStorage.getItem('ws_name'); const contact = localStorage.getItem('ws_contact'); if(name||contact){ contactsList.innerHTML = `<div style="font-weight:700">${name||'Your Name'}</div><div style="font-size:13px;color:var(--muted)">${contact||'Contact not provided'}</div>`; } else { contactsList.textContent = 'No contacts saved. Add from Profile.'; } }
    updateContactsUI();

    const sosBtn = document.getElementById('sosBtn');
    sosBtn.addEventListener('click', ()=>{
      openModal('Confirm SOS', `<p style="color:var(--muted)">Are you sure you want to activate SOS? This demo will simulate sending your location to saved emergency contacts.</p><div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px"><button id="cancelSOS" class="ghost">Cancel</button><button id="confirmSOS" class="sos">Confirm SOS</button></div>`);
      setTimeout(()=>{ document.getElementById('cancelSOS').addEventListener('click', closeModal); document.getElementById('confirmSOS').addEventListener('click', ()=>{ closeModal(); doSOS(); }); },20);
    });

    function doSOS(){ openModal('Sending SOS...', `<p style="color:var(--muted)">Locating you and notifying emergency contacts...</p>`);
      if(navigator.geolocation){ navigator.geolocation.getCurrentPosition(pos=>{ closeModal(); const coords = `${pos.coords.latitude.toFixed(5)}, ${pos.coords.longitude.toFixed(5)}`; notifyContacts(coords,'SOS'); }, err=>{ const coords = simulateCoords(); closeModal(); notifyContacts(coords,'SOS (simulated)'); }); } else { const coords = simulateCoords(); closeModal(); notifyContacts(coords,'SOS (simulated)'); }
    }

    function notifyContacts(coords,label){ const contact = localStorage.getItem('ws_contact') || 'No saved contact'; const name = localStorage.getItem('ws_name') || 'User'; openModal('SOS Sent', `<p><strong>Sent to:</strong> ${contact}</p><p style="color:var(--muted)">${name}, this is a simulated message. Coordinates: <strong>${coords}</strong></p>`); showToast('SOS notification simulated'); }

    document.getElementById('shareLocation').addEventListener('click', ()=>{
      if(navigator.geolocation){ openModal('Sharing Location', `<p style="color:var(--muted)">Attempting to get your location…</p>`); navigator.geolocation.getCurrentPosition(pos=>{ closeModal(); shareSimulatedLocation(`Lat ${pos.coords.latitude.toFixed(5)}, Lon ${pos.coords.longitude.toFixed(5)}`); }, err=>{ closeModal(); shareSimulatedLocation(simulateCoords()); }); } else { shareSimulatedLocation(simulateCoords()); }
    });

    function shareSimulatedLocation(locText){ const contact = localStorage.getItem('ws_contact') || 'No saved contact'; openModal('Location Shared', `<p style="color:var(--muted)">Location (<strong>${locText}</strong>) has been shared with <strong>${contact}</strong> (simulated).</p>`); showToast('Location share simulated'); }

    function simulateCoords(){
      const lat = (28.7041 + (Math.random()-0.5)*0.03).toFixed(5);
      const lon = (77.1025 + (Math.random()-0.5)*0.03).toFixed(5);
      return `${lat}, ${lon}`;
    }

    document.getElementById('openReport').addEventListener('click', ()=>{
      const tmpl = document.getElementById('reportTemplate'); openModal('Report Incident', tmpl.innerHTML);
      setTimeout(()=>{
        const form = document.getElementById('reportForm'); form.addEventListener('submit',(e)=>{
          e.preventDefault();
          const type = document.getElementById('incidentType').value;
          const loc = document.getElementById('locationInput').value.trim();
          const desc = document.getElementById('descInput').value.trim();
          if(!loc || !desc){ alert('Please provide location and description (client-side validation).'); return; }
          closeModal();
          openModal('Report Submitted', `<p style="color:var(--muted)">Thank you. Your report has been submitted locally (demo).<br><strong>Type:</strong> ${type} <br><strong>Location:</strong> ${loc}</p>`);
          showToast('Report saved (simulated)');
        });
      },20);
    });

    document.addEventListener('keydown',(e)=>{ if(e.key==='Escape'){ closeModal(); closeProfileModal(); } });
    profileBackdrop.addEventListener('click', (e)=>{ if(e.target===profileBackdrop) closeProfileModal(); });

    const themeToggle = document.getElementById('themeToggle');
    const root = document.documentElement;
    themeToggle.addEventListener('click', ()=>{
      const isDark = root.getAttribute('data-theme') === 'dark';
      root.setAttribute('data-theme', isDark ? '' : 'dark');
      themeToggle.setAttribute('aria-pressed', String(!isDark));
    });

    window.addEventListener('load', ()=>{
      const markers = mapMock.querySelectorAll('.marker');
      markers.forEach((m,i)=>{
        m.style.opacity=0;
        m.style.transform += ' translateY(6px)';
        setTimeout(()=>{
          m.style.transition='opacity .32s ease, transform .32s ease';
          m.style.opacity=1;
          m.style.transform = m.style.transform.replace(' translateY(6px)','');
        }, 120*i);
      });
    });
  </script>
</body>
</html>
